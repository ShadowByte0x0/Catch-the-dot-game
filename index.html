<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catch The Dot</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      font-family: system-ui, Arial, sans-serif;
      background: #0f172a;
      color: #e2e8f0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .game {
      width: 90vmin;
      height: 60vmin;
      background: #111827;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      position: relative;
      overflow: hidden;
      padding: 16px;
    }

    .top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }

    .stat {
      background: #0b1220;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 600;
    }

    .btn {
      background: #22c55e;
      color: #052e16;
      font-weight: 800;
      border: none;
      padding: 10px 16px;
      border-radius: 12px;
      cursor: pointer;
      transition: transform 0.05s ease;
    }
    .btn:active { transform: scale(0.98); }

    .board {
      position: absolute;
      inset: 60px 16px 16px 16px;
      background: radial-gradient(ellipse at center, #0b1220 0%, #0a0f1d 100%);
      border-radius: 12px;
      overflow: hidden;
    }

    .dot {
      width: 48px;
      height: 48px;
      border-radius: 999px;
      background: #60a5fa;
      position: absolute;
      display: none;
      box-shadow: 0 8px 18px rgba(96,165,250,0.45);
      cursor: pointer;
      user-select: none;
      touch-action: manipulation;
    }

    .bar {
      height: 10px;
      background: #0b1220;
      border-radius: 999px;
      overflow: hidden;
    }
    .bar > div {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #84cc16);
      transition: width 0.2s ease;
    }

    .center {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      pointer-events: none;
    }

    .msg {
      background: rgba(2,6,23,0.75);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(148,163,184,0.2);
      padding: 18px 22px;
      border-radius: 14px;
      text-align: center;
      pointer-events: auto;
    }

    .small {
      opacity: 0.8;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="game">
    <div class="top">
      <div class="stat">Score: <span id="score">0</span></div>
      <div class="stat">Time: <span id="time">30</span>s</div>
      <div class="stat" style="min-width:120px;">
        <div class="bar"><div id="progress"></div></div>
      </div>
      <button id="startBtn" class="btn">Start</button>
    </div>

    <div id="board" class="board">
      <div id="dot" class="dot" title="Catch me"></div>
      <div class="center">
        <div id="overlay" class="msg">
          <h2>Catch The Dot</h2>
          <p class="small">Click the dot to score. You have thirty seconds.</p>
          <p class="small">Tip. The dot moves faster as your score grows.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const startBtn = document.getElementById("startBtn");
    const dot = document.getElementById("dot");
    const board = document.getElementById("board");
    const overlay = document.getElementById("overlay");
    const scoreEl = document.getElementById("score");
    const timeEl = document.getElementById("time");
    const progressEl = document.getElementById("progress");

    let score = 0;
    let timeLeft = 30;
    let timerId = null;
    let moveTimerId = null;

    function rand(min, max) {
      return Math.random() * (max - min) + min;
    }

    function placeDot() {
      const rect = board.getBoundingClientRect();
      const size = 48;
      // Keep inside the board
      const x = rand(0, rect.width - size);
      const y = rand(0, rect.height - size);
      dot.style.left = x + "px";
      dot.style.top = y + "px";
    }

    function speedMs() {
      // Faster with more score. Floor at 300 ms. Start at 900 ms.
      const base = 900;
      const faster = Math.min(score * 15, 600);
      return Math.max(base - faster, 300);
    }

    function startMoving() {
      if (moveTimerId) clearInterval(moveTimerId);
      placeDot();
      dot.style.display = "block";
      moveTimerId = setInterval(placeDot, speedMs());
    }

    function startGame() {
      score = 0;
      timeLeft = 30;
      scoreEl.textContent = "0";
      timeEl.textContent = "30";
      progressEl.style.width = "0%";
      overlay.style.display = "none";
      startBtn.disabled = true;

      startMoving();

      timerId = setInterval(() => {
        timeLeft -= 1;
        timeEl.textContent = timeLeft;
        const pct = ((30 - timeLeft) / 30) * 100;
        progressEl.style.width = pct + "%";

        if (timeLeft <= 0) {
          endGame();
        }
      }, 1000);
    }

    function endGame() {
      clearInterval(timerId);
      clearInterval(moveTimerId);
      dot.style.display = "none";
      startBtn.disabled = false;

      // Save best score in the browser
      const best = Number(localStorage.getItem("bestScore") || 0);
      const newBest = Math.max(best, score);
      localStorage.setItem("bestScore", String(newBest));

      overlay.innerHTML = `
        <h2>Time</h2>
        <p>Your score: <strong>${score}</strong></p>
        <p>Best score: <strong>${newBest}</strong></p>
        <button id="again" class="btn">Play Again</button>
      `;
      overlay.style.display = "block";
      document.getElementById("again").onclick = startGame;
    }

    dot.addEventListener("click", () => {
      score += 1;
      scoreEl.textContent = score;
      placeDot();
      // refresh speed as score grows
      startMoving();
    });

    startBtn.addEventListener("click", startGame);

    // Resize safety
    window.addEventListener("resize", () => {
      if (dot.style.display === "block") placeDot();
    });
  </script>
</body>
</html>
